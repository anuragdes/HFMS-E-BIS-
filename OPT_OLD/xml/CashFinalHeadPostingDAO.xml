<?xml version="1.0" encoding="UTF-8"?>
<tns:Transaction MODULE_NAME="CASH" PROCESS_NAME="Challan Form Preparation" xmlns:tns="http://www.example.org/transactionSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.example.org/transactionSchema transactionSchema.xsd ">
  
<OPR ID="1" NAME="UPDATE" BLOCK_SIZE="5" QRY_TOT_SIZE="5" TRN_MGMT="N">

<BLOCK ID="1" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
	<QRY ID="1" COL_SIZE="2">
	INSERT INTO ACTCAS_AL_HEAD_POSTING_TRN (STR_CHALLAN_NO,DT_CHALLAN_DATE,STR_CLASSIFICATION_CODE,STR_GRANT_TYPE_FROM_CODE,STR_BUD_TYPE_FROM_CODE,NUM_DEPT_FROM_CODE,STR_DIVISION_FROM_CODE,STR_SUB_DIVION_FROM_CODE,STR_SCHEME_FROM_CODE,STR_PROJECT_FROM_CODE,STR_MAJOR_HEAD_FROM_CODE,STR_SUBMAJOR_HEAD_FROM_CODE,STR_MINOR_HEAD_FROM_CODE,STR_SUB_MINOR_HEAD_FROM_CODE,STR_HEAD_POSTING_BY,DT_HEAD_POSTING_DATE,STR_REMARKS,NUM_CHQ_CLR_FLAG,GDT_LSTMOD_DATE,GNUM_LSTMOD_SEATID,GDT_EFFECT_DATE,GDT_ENTRY_DATE,GNUM_ISVALID,GNUM_SEAT_ID,GNUM_HOSPITAL_CODE,STR_CHALLAN_STATUS,STR_DEPOSIT_INTO_CODE,DT_CASH_REC_DATE,STR_CASH_RECEIPT_NO) (Select T.STR_CHALLAN_NO,T.DT_CHALLAN_DATE,T.STR_CLASSIFICATION_CODE,T.STR_GRANT_TYPE_FROM_CODE,T.STR_BUD_TYPE_FROM_CODE,T.NUM_DEPT_FROM_CODE,T.STR_DIVISION_FROM_CODE,T.STR_SUB_DIVION_FROM_CODE,T.STR_SCHEME_FROM_CODE,T.STR_PROJECT_FROM_CODE,T.STR_MAJOR_HEAD_FROM_CODE,T.STR_SUBMAJOR_HEAD_FROM_CODE,T.STR_MINOR_HEAD_FROM_CODE,T.STR_SUB_MINOR_HEAD_FROM_CODE,T.STR_HEAD_POSTING_BY,T.DT_HEAD_POSTING_DATE,T.STR_REMARKS,T.NUM_CHQ_CLR_FLAG,T.GDT_LSTMOD_DATE,T.GNUM_LSTMOD_SEATID,T.GDT_EFFECT_DATE,T.GDT_ENTRY_DATE,T.GNUM_ISVALID,T.GNUM_SEAT_ID,T.GNUM_HOSPITAL_CODE,T.STR_CHALLAN_STATUS,T.STR_DEPOSIT_INTO_CODE,T.DT_CASH_REC_DATE,T.STR_CASH_RECEIPT_NO from ACTCAS_HEAD_POSTING_TRN T where T.STR_CHALLAN_NO=? and T.GNUM_HOSPITAL_CODE=?)
	</QRY>
</BLOCK>
<BLOCK ID="2" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
	<QRY ID="1" COL_SIZE="2">
	DELETE from ACTCAS_HEAD_POSTING_TRN T where T.STR_CHALLAN_NO=? and T.GNUM_HOSPITAL_CODE=?
	</QRY>
</BLOCK>
<BLOCK ID="3" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
	<QRY ID="1" COL_SIZE="4">
	INSERT INTO ACTCAS_HEAD_POSTING_TRN (STR_DEPOSIT_INTO_CODE,STR_CASH_RECEIPT_NO,DT_CASH_REC_DATE,STR_CHALLAN_NO,DT_CHALLAN_DATE,STR_CLASSIFICATION_CODE,STR_CHALLAN_STATUS,GNUM_HOSPITAL_CODE) (Select T.STR_DEPOSIT_INTO_CODE,A.STR_CASH_RECEIPT_NO,A.DT_CASHREC_DATE,T.STR_CHALLAN_NO,T.DT_CHALLAN_DATE,T.STR_CLASSIFICATION_CODE,T.STR_CHALLAN_STATUS,T.GNUM_HOSPITAL_CODE from ACTCAS_CHAL_TRN T,ACTCAS_CHAL_ACC_TRN A where T.STR_CHALLAN_NO=A.STR_CHALLAN_NO and T.GNUM_HOSPITAL_CODE=A.GNUM_HOSPITAL_CODE and to_char(A.DT_CASHREC_DATE,'DD-Mon-YYYY')=? and T.STR_CHALLAN_STATUS=7 and T.GNUM_HOSPITAL_CODE=? and T.STR_CLASSIFICATION_CODE=? and T.STR_DEPOSIT_INTO_CODE=?)
	</QRY>
</BLOCK>
<BLOCK ID="4" QRY_SIZE="1" ROWS_INS="S" MANDATORY="Y">
	<QRY ID="1" COL_SIZE="27">
	UPDATE ACTCAS_HEAD_POSTING_TRN T SET T.STR_GRANT_TYPE_FROM_CODE=?,T.STR_BUD_TYPE_FROM_CODE=?,T.NUM_DEPT_FROM_CODE=?,T.STR_DIVISION_FROM_CODE=?,T.STR_SUB_DIVION_FROM_CODE=?,T.STR_SCHEME_FROM_CODE=?,T.STR_PROJECT_FROM_CODE=?,T.STR_MAJOR_HEAD_FROM_CODE=?,T.STR_SUBMAJOR_HEAD_FROM_CODE=?,T.STR_MINOR_HEAD_FROM_CODE=?,T.STR_SUB_MINOR_HEAD_FROM_CODE=?,T.STR_HEAD_POSTING_BY=?,T.DT_HEAD_POSTING_DATE=?,T.STR_REMARKS=?,T.NUM_CHQ_CLR_FLAG=?,T.GDT_LSTMOD_DATE=?,T.GNUM_LSTMOD_SEATID=?,T.GDT_EFFECT_DATE=?,T.GDT_ENTRY_DATE=?,T.GNUM_ISVALID=?,T.GNUM_SEAT_ID=?,T.GNUM_HOSPITAL_CODE=?,T.STR_CHALLAN_STATUS=? WHERE to_char(T.DT_CASH_REC_DATE,'DD-Mon-YYYY')=? and T.STR_CHALLAN_STATUS=7 and T.GNUM_HOSPITAL_CODE=? and T.STR_CLASSIFICATION_CODE=? and T.STR_DEPOSIT_INTO_CODE=?
	</QRY>
</BLOCK>
<BLOCK ID="5" QRY_SIZE="1" ROWS_INS="S" MANDATORY="Y">
	<QRY ID="1" COL_SIZE="5">
	UPDATE  ACTCAS_CHAL_TRN T SET T.STR_CHALLAN_STATUS=? where T.DT_CHALLAN_DATE=? and T.STR_CHALLAN_STATUS=7 and T.GNUM_HOSPITAL_CODE=? and T.STR_CLASSIFICATION_CODE=? and T.STR_DEPOSIT_INTO_CODE=?
	</QRY>
</BLOCK>
</OPR>
<OPR ID="2" NAME="UPDATE" BLOCK_SIZE="1" QRY_TOT_SIZE="1" TRN_MGMT="N">
<BLOCK ID="1" QRY_SIZE="1" ROWS_INS="S" MANDATORY="Y">
	<QRY ID="1" COL_SIZE="6">
	UPDATE  actcas_chq_reconcile_trn T SET T.NUM_REV_POST_STAT=?,t.DT_REV_POST_DATE=? where T.DT_CHALLAN_DATE=? and T.STR_RECONCILE_STATUS='No' and T.GNUM_HOSPITAL_CODE=?  and t.STR_INSTRUMENT_NO=? and t.STR_CHALLAN_NO=?
	</QRY>
</BLOCK>
</OPR>
</tns:Transaction>


