<?xml version="1.0" encoding="UTF-8"?>
<tns:Transaction MODULE_NAME="BUDGET" PROCESS_NAME="Allocation Npn Form" xmlns:tns="http://www.example.org/transactionSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.example.org/transactionSchema transactionSchema.xsd ">


 <OPR ID="1" NAME="INSERT" BLOCK_SIZE="5" QRY_TOT_SIZE="5" TRN_MGMT="Y">
	  
	  <BLOCK ID="1" QRY_SIZE="1" ROWS_INS="S" MANDATORY="Y">
		<QRY ID="1" COL_SIZE="14">
		INSERT INTO ACTBUD_H_FUND_TRAN_TRN(STR_BUDGET_YEAR,STR_SANCTION_AUTH,STR_SANCTION_OREDER_NO,DT_SANCTION_ORDER_DATE,STR_SINATORY_AUTH,STR_GRANT_TYPE_CODE,STR_BUD_TYPE_CODE,STR_TYPE_OF_DEPT,NUM_DEPT_CODE,GDT_ENTRY_DATE,GNUM_ISVALID,GNUM_SEAT_ID,NUM_HTH_TRANF_FUND_ID,GNUM_HOSPITAL_CODE) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
		</QRY>
	  </BLOCK>
	
	  <BLOCK ID="2" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
		<QRY ID="1" COL_SIZE="14">
		INSERT INTO ACTBUD_H_FUND_FROM_DTL (STR_DIVISION_CODE,STR_SUB_DIVION_CODE,STR_SCHEME_CODE,STR_PROJECT_CODE,STR_MAJOR_HEAD_CODE,STR_SUB_MAJOR_HEAD_CODE,STR_MINOR_HEAD_CODE,STR_SUB_MINOR_HEAD_CODE,NUM_DR_AMOUNT,GDT_ENTRY_DATE,GNUM_ISVALID,GNUM_SEAT_ID,NUM_HTH_TRANF_FUND_ID,GNUM_HOSPITAL_CODE) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
		</QRY>
	   </BLOCK>
	   
	   <BLOCK ID="3" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
		<QRY ID="1" COL_SIZE="14">
		INSERT INTO ACTBUD_H_FUND_TO_DTL (STR_DIVISION_CODE,STR_SUB_DIVION_CODE,STR_SCHEME_CODE,STR_PROJECT_CODE,STR_MAJOR_HEAD_CODE,STR_SUB_MAJOR_HEAD_CODE,STR_MINOR_HEAD_CODE,STR_SUB_MINOR_HEAD_CODE,NUM_CR_AMOUNT,GDT_ENTRY_DATE,GNUM_ISVALID,GNUM_SEAT_ID,NUM_HTH_TRANF_FUND_ID,GNUM_HOSPITAL_CODE) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
		</QRY>
	   </BLOCK>
	   
	   <BLOCK ID="4" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
	   <QRY ID="1" COL_SIZE="23">
	    UPDATE ACTBUD_ALLOC_PNP_DTL SET NUM_AFTER_TRANSFER_DR_AMOUNT=? WHERE NUM_ALLOC_ID in (select t.num_alloc_id from actbud_alloc_pnp_trn t, ACTBUD_ALLOC_PNP_DTL d where t.num_alloc_id=d.num_alloc_id and t.str_grant_type_code=? and t.str_bud_type_code=? and t.num_dept_code=? and t.str_budget_year=? and d.STR_DIVISION_ID=?  AND d.STR_SUB_DIVION_CODE=? AND d.STR_SCHEM_CODE=? AND d.STR_PROJECT_CODE=? AND d.STR_MAJOR_HEAD_CODE=? AND d.STR_SUB_MAJOR_HEAD_CODE=? AND d.STR_MINOR_HEAD_CODE=? AND d.STR_SUB_MINOR_HEAD_CODE=? AND d.GNUM_HOSPITAL_CODE=?) and STR_DIVISION_ID=?  AND STR_SUB_DIVION_CODE=? AND STR_SCHEM_CODE=? AND STR_PROJECT_CODE=? AND STR_MAJOR_HEAD_CODE=? AND STR_SUB_MAJOR_HEAD_CODE=? AND STR_MINOR_HEAD_CODE=? AND STR_SUB_MINOR_HEAD_CODE=? AND GNUM_HOSPITAL_CODE=?
	   </QRY>
      </BLOCK>
     
	   <BLOCK ID="5" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
	   <QRY ID="1" COL_SIZE="23">
	    UPDATE ACTBUD_ALLOC_PNP_DTL SET NUM_AFTER_TRASNFER_CR_AMOUNT=? WHERE NUM_ALLOC_ID in (select t.num_alloc_id from actbud_alloc_pnp_trn t, ACTBUD_ALLOC_PNP_DTL d where t.num_alloc_id=d.num_alloc_id and t.str_grant_type_code=? and t.str_bud_type_code=? and t.num_dept_code=? and t.str_budget_year=? and d.STR_DIVISION_ID=?  AND d.STR_SUB_DIVION_CODE=? AND d.STR_SCHEM_CODE=? AND d.STR_PROJECT_CODE=? AND d.STR_MAJOR_HEAD_CODE=? AND d.STR_SUB_MAJOR_HEAD_CODE=? AND d.STR_MINOR_HEAD_CODE=? AND d.STR_SUB_MINOR_HEAD_CODE=? AND d.GNUM_HOSPITAL_CODE=?) and STR_DIVISION_ID=?  AND STR_SUB_DIVION_CODE=? AND STR_SCHEM_CODE=? AND STR_PROJECT_CODE=? AND STR_MAJOR_HEAD_CODE=? AND STR_SUB_MAJOR_HEAD_CODE=? AND STR_MINOR_HEAD_CODE=? AND STR_SUB_MINOR_HEAD_CODE=? AND GNUM_HOSPITAL_CODE=?
	   </QRY>
      </BLOCK>
	     
  </OPR>
  
  
 <OPR ID="5" NAME="INSERT" BLOCK_SIZE="5" QRY_TOT_SIZE="5" TRN_MGMT="Y">
	   <BLOCK ID="1" QRY_SIZE="1" ROWS_INS="S" MANDATORY="Y">
		<QRY ID="1" COL_SIZE="13">
		    INSERT INTO ACTBUD_H_FUND_TRAN_TRN(STR_BUDGET_YEAR,STR_SANCTION_AUTH,STR_SANCTION_OREDER_NO,DT_SANCTION_ORDER_DATE,STR_SINATORY_AUTH,STR_GRANT_TYPE_CODE,STR_BUD_TYPE_CODE,STR_TYPE_OF_DEPT,GDT_ENTRY_DATE,GNUM_ISVALID,GNUM_SEAT_ID,NUM_HTH_TRANF_FUND_ID,GNUM_HOSPITAL_CODE) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?)
		</QRY>
	  </BLOCK>
	
	   <BLOCK ID="2" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
		<QRY ID="1" COL_SIZE="15">
		INSERT INTO ACTBUD_H_FUND_FROM_DTL (NUM_FROM_DEPT_CODE,STR_DIVISION_CODE,STR_SUB_DIVION_CODE,STR_SCHEME_CODE,STR_PROJECT_CODE,STR_MAJOR_HEAD_CODE,STR_SUB_MAJOR_HEAD_CODE,STR_MINOR_HEAD_CODE,STR_SUB_MINOR_HEAD_CODE,NUM_DR_AMOUNT,GDT_ENTRY_DATE,GNUM_ISVALID,GNUM_SEAT_ID,NUM_HTH_TRANF_FUND_ID,GNUM_HOSPITAL_CODE) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
		</QRY>
	   </BLOCK>
   
	   <BLOCK ID="3" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
		<QRY ID="1" COL_SIZE="15">
		INSERT INTO ACTBUD_H_FUND_TO_DTL (NUM_FROM_DEPT_CODE,STR_DIVISION_CODE,STR_SUB_DIVION_CODE,STR_SCHEME_CODE,STR_PROJECT_CODE,STR_MAJOR_HEAD_CODE,STR_SUB_MAJOR_HEAD_CODE,STR_MINOR_HEAD_CODE,STR_SUB_MINOR_HEAD_CODE,NUM_CR_AMOUNT,GDT_ENTRY_DATE,GNUM_ISVALID,GNUM_SEAT_ID,NUM_HTH_TRANF_FUND_ID,GNUM_HOSPITAL_CODE) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
		</QRY>
	   </BLOCK>
	   
	    <BLOCK ID="4" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
	   <QRY ID="1" COL_SIZE="23">
	    UPDATE ACTBUD_ALLOC_PNP_DTL SET NUM_AFTER_TRANSFER_DR_AMOUNT=? WHERE NUM_ALLOC_ID in (select t.num_alloc_id from actbud_alloc_pnp_trn t, ACTBUD_ALLOC_PNP_DTL d where t.num_alloc_id=d.num_alloc_id and t.str_grant_type_code=? and t.str_bud_type_code=? and t.num_dept_code=? and t.str_budget_year=? and d.STR_DIVISION_ID=?  AND d.STR_SUB_DIVION_CODE=? AND d.STR_SCHEM_CODE=? AND d.STR_PROJECT_CODE=? AND d.STR_MAJOR_HEAD_CODE=? AND d.STR_SUB_MAJOR_HEAD_CODE=? AND d.STR_MINOR_HEAD_CODE=? AND d.STR_SUB_MINOR_HEAD_CODE=? AND d.GNUM_HOSPITAL_CODE=?) and STR_DIVISION_ID=?  AND STR_SUB_DIVION_CODE=? AND STR_SCHEM_CODE=? AND STR_PROJECT_CODE=? AND STR_MAJOR_HEAD_CODE=? AND STR_SUB_MAJOR_HEAD_CODE=? AND STR_MINOR_HEAD_CODE=? AND STR_SUB_MINOR_HEAD_CODE=? AND GNUM_HOSPITAL_CODE=?
	   </QRY>
      </BLOCK>
      
       <BLOCK ID="5" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
	   <QRY ID="1" COL_SIZE="23">
	   UPDATE ACTBUD_ALLOC_PNP_DTL SET NUM_AFTER_TRASNFER_CR_AMOUNT=? WHERE NUM_ALLOC_ID in (select t.num_alloc_id from actbud_alloc_pnp_trn t, ACTBUD_ALLOC_PNP_DTL d where t.num_alloc_id=d.num_alloc_id and t.str_grant_type_code=? and t.str_bud_type_code=? and t.num_dept_code=? and t.str_budget_year=? and d.STR_DIVISION_ID=?  AND d.STR_SUB_DIVION_CODE=? AND d.STR_SCHEM_CODE=? AND d.STR_PROJECT_CODE=? AND d.STR_MAJOR_HEAD_CODE=? AND d.STR_SUB_MAJOR_HEAD_CODE=? AND d.STR_MINOR_HEAD_CODE=? AND d.STR_SUB_MINOR_HEAD_CODE=? AND d.GNUM_HOSPITAL_CODE=?) and STR_DIVISION_ID=?  AND STR_SUB_DIVION_CODE=? AND STR_SCHEM_CODE=? AND STR_PROJECT_CODE=? AND STR_MAJOR_HEAD_CODE=? AND STR_SUB_MAJOR_HEAD_CODE=? AND STR_MINOR_HEAD_CODE=? AND STR_SUB_MINOR_HEAD_CODE=? AND GNUM_HOSPITAL_CODE=?
	   </QRY>
      </BLOCK>
	   
  </OPR>
  
 
<OPR ID="2" NAME="UPDATE" BLOCK_SIZE="10" QRY_TOT_SIZE="10" TRN_MGMT="Y">
	 <BLOCK ID="1" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
	 <QRY ID="1" COL_SIZE="23">
	 UPDATE ACTBUD_ALLOC_PNP_DTL SET NUM_AFTER_TRANSFER_DR_AMOUNT=? WHERE NUM_ALLOC_ID in (select t.num_alloc_id from actbud_alloc_pnp_trn t, ACTBUD_ALLOC_PNP_DTL d where t.num_alloc_id=d.num_alloc_id and t.str_grant_type_code=? and t.str_bud_type_code=? and t.num_dept_code=? and t.str_budget_year=? and d.STR_DIVISION_ID=?  AND d.STR_SUB_DIVION_CODE=? AND d.STR_SCHEM_CODE=? AND d.STR_PROJECT_CODE=? AND d.STR_MAJOR_HEAD_CODE=? AND d.STR_SUB_MAJOR_HEAD_CODE=? AND d.STR_MINOR_HEAD_CODE=? AND d.STR_SUB_MINOR_HEAD_CODE=? AND d.GNUM_HOSPITAL_CODE=?) and STR_DIVISION_ID=?  AND STR_SUB_DIVION_CODE=? AND STR_SCHEM_CODE=? AND STR_PROJECT_CODE=? AND STR_MAJOR_HEAD_CODE=? AND STR_SUB_MAJOR_HEAD_CODE=? AND STR_MINOR_HEAD_CODE=? AND STR_SUB_MINOR_HEAD_CODE=? AND GNUM_HOSPITAL_CODE=?
	 </QRY>
     </BLOCK>
      
     <BLOCK ID="2" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
	 <QRY ID="1" COL_SIZE="23">
	 UPDATE ACTBUD_ALLOC_PNP_DTL SET NUM_AFTER_TRASNFER_CR_AMOUNT=? WHERE NUM_ALLOC_ID in (select t.num_alloc_id from actbud_alloc_pnp_trn t, ACTBUD_ALLOC_PNP_DTL d where t.num_alloc_id=d.num_alloc_id and t.str_grant_type_code=? and t.str_bud_type_code=? and t.num_dept_code=? and t.str_budget_year=? and d.STR_DIVISION_ID=?  AND d.STR_SUB_DIVION_CODE=? AND d.STR_SCHEM_CODE=? AND d.STR_PROJECT_CODE=? AND d.STR_MAJOR_HEAD_CODE=? AND d.STR_SUB_MAJOR_HEAD_CODE=? AND d.STR_MINOR_HEAD_CODE=? AND d.STR_SUB_MINOR_HEAD_CODE=? AND d.GNUM_HOSPITAL_CODE=?) and STR_DIVISION_ID=?  AND STR_SUB_DIVION_CODE=? AND STR_SCHEM_CODE=? AND STR_PROJECT_CODE=? AND STR_MAJOR_HEAD_CODE=? AND STR_SUB_MAJOR_HEAD_CODE=? AND STR_MINOR_HEAD_CODE=? AND STR_SUB_MINOR_HEAD_CODE=? AND GNUM_HOSPITAL_CODE=?
	 </QRY>
    </BLOCK>
    
	 <BLOCK ID="3" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
	 <QRY ID="1" COL_SIZE="2">
	 INSERT INTO ACTBUD_ALOG_H_FUND_TRAN_TRN(STR_BUDGET_YEAR,STR_SANCTION_AUTH,STR_SANCTION_OREDER_NO,DT_SANCTION_ORDER_DATE,STR_GRANT_TYPE_CODE,STR_BUD_TYPE_CODE,STR_TYPE_OF_DEPT,NUM_DEPT_CODE ,GDT_LSTMOD_DATE,GNUM_LSTMOD_SEATID,GDT_ENTRY_DATE,GNUM_ISVALID ,GNUM_SEAT_ID ,NUM_HTH_TRANF_FUND_ID,STR_SINATORY_AUTH,GNUM_HOSPITAL_CODE ) (SELECT T.STR_BUDGET_YEAR,T.STR_SANCTION_AUTH,T.STR_SANCTION_OREDER_NO,T.DT_SANCTION_ORDER_DATE,T.STR_GRANT_TYPE_CODE,T.STR_BUD_TYPE_CODE,T.STR_TYPE_OF_DEPT,T.NUM_DEPT_CODE ,T.GDT_LSTMOD_DATE,T.GNUM_LSTMOD_SEATID,T.GDT_ENTRY_DATE,T.GNUM_ISVALID ,T.GNUM_SEAT_ID ,T.NUM_HTH_TRANF_FUND_ID,T.STR_SINATORY_AUTH,T.GNUM_HOSPITAL_CODE FROM ACTBUD_H_FUND_TRAN_TRN T WHERE T.NUM_HTH_TRANF_FUND_ID=? AND T.GNUM_HOSPITAL_CODE=?)
	 </QRY>
	 </BLOCK>
	
	<BLOCK ID="4" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
	 <QRY ID="1" COL_SIZE="2">
	 INSERT INTO ACTBUD_ALOG_H_FUND_FROM_DTL(NUM_HTH_TRANF_FUND_ID,NUM_FROM_DEPT_CODE,STR_DIVISION_CODE,STR_SUB_DIVION_CODE,STR_SCHEME_CODE,STR_PROJECT_CODE,STR_MAJOR_HEAD_CODE,STR_SUB_MAJOR_HEAD_CODE ,STR_MINOR_HEAD_CODE,STR_SUB_MINOR_HEAD_CODE,NUM_DR_AMOUNT,NUM_CR_AMOUNT ,GDT_ENTRY_DATE ,GNUM_ISVALID,GNUM_SEAT_ID,GNUM_HOSPITAL_CODE ) (SELECT T.NUM_HTH_TRANF_FUND_ID,T.NUM_FROM_DEPT_CODE,T.STR_DIVISION_CODE,T.STR_SUB_DIVION_CODE,T.STR_SCHEME_CODE,T.STR_PROJECT_CODE,T.STR_MAJOR_HEAD_CODE,T.STR_SUB_MAJOR_HEAD_CODE ,T.STR_MINOR_HEAD_CODE,T.STR_SUB_MINOR_HEAD_CODE,T.NUM_DR_AMOUNT,T.NUM_CR_AMOUNT ,T.GDT_ENTRY_DATE ,T.GNUM_ISVALID,T.GNUM_SEAT_ID,T.GNUM_HOSPITAL_CODE FROM ACTBUD_H_FUND_FROM_DTL T WHERE T.NUM_HTH_TRANF_FUND_ID=? AND T.GNUM_HOSPITAL_CODE=?)
	 </QRY>
	 </BLOCK>
	 
	 <BLOCK ID="5" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
	 <QRY ID="1" COL_SIZE="2">
	 INSERT INTO ACTBUD_ALOG_H_FUND_TO_DTL(NUM_HTH_TRANF_FUND_ID,NUM_FROM_DEPT_CODE,STR_DIVISION_CODE,STR_SUB_DIVION_CODE,STR_SCHEME_CODE,STR_PROJECT_CODE,STR_MAJOR_HEAD_CODE,STR_SUB_MAJOR_HEAD_CODE ,STR_MINOR_HEAD_CODE,STR_SUB_MINOR_HEAD_CODE,NUM_DR_AMOUNT,NUM_CR_AMOUNT ,GDT_ENTRY_DATE ,GNUM_ISVALID,GNUM_SEAT_ID,GNUM_HOSPITAL_CODE ) (SELECT T.NUM_HTH_TRANF_FUND_ID,T.NUM_FROM_DEPT_CODE,T.STR_DIVISION_CODE,T.STR_SUB_DIVION_CODE,T.STR_SCHEME_CODE,T.STR_PROJECT_CODE,T.STR_MAJOR_HEAD_CODE,T.STR_SUB_MAJOR_HEAD_CODE ,T.STR_MINOR_HEAD_CODE,T.STR_SUB_MINOR_HEAD_CODE,T.NUM_DR_AMOUNT,T.NUM_CR_AMOUNT ,T.GDT_ENTRY_DATE ,T.GNUM_ISVALID,T.GNUM_SEAT_ID,T.GNUM_HOSPITAL_CODE FROM ACTBUD_H_FUND_TO_DTL T WHERE T.NUM_HTH_TRANF_FUND_ID=? AND T.GNUM_HOSPITAL_CODE=?)
	 </QRY>
	 </BLOCK>
	 
	 <BLOCK ID="6" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
	 <QRY ID="1" COL_SIZE="2">
	 DELETE FROM  ACTBUD_H_FUND_FROM_DTL A WHERE NUM_HTH_TRANF_FUND_ID=? AND GNUM_HOSPITAL_CODE=?
	 </QRY>
	 </BLOCK>
	 
	 <BLOCK ID="7" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
	 <QRY ID="1" COL_SIZE="2">
	 DELETE FROM  ACTBUD_H_FUND_TO_DTL A WHERE NUM_HTH_TRANF_FUND_ID=? AND GNUM_HOSPITAL_CODE=?
	 </QRY>
	 </BLOCK>
	
	 <BLOCK ID="8" QRY_SIZE="1" ROWS_INS="S" MANDATORY="Y">
	 <QRY ID="1" COL_SIZE="13">
	 UPDATE ACTBUD_H_FUND_TRAN_TRN SET STR_BUDGET_YEAR=?,STR_SANCTION_AUTH=?,STR_SANCTION_OREDER_NO=?,DT_SANCTION_ORDER_DATE=?,STR_SINATORY_AUTH=?,STR_GRANT_TYPE_CODE=?,STR_BUD_TYPE_CODE=?,STR_TYPE_OF_DEPT=?,NUM_DEPT_CODE=?,GDT_LSTMOD_DATE=?,GNUM_LSTMOD_SEATID=? WHERE NUM_HTH_TRANF_FUND_ID=? AND GNUM_HOSPITAL_CODE=?
	 </QRY>
	 </BLOCK>
		
	 <BLOCK ID="9" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
	 <QRY ID="1" COL_SIZE="14">
	 INSERT INTO ACTBUD_H_FUND_FROM_DTL (STR_DIVISION_CODE,STR_SUB_DIVION_CODE,STR_SCHEME_CODE,STR_PROJECT_CODE,STR_MAJOR_HEAD_CODE,STR_SUB_MAJOR_HEAD_CODE,STR_MINOR_HEAD_CODE,STR_SUB_MINOR_HEAD_CODE,NUM_DR_AMOUNT,GDT_ENTRY_DATE,GNUM_ISVALID,GNUM_SEAT_ID,NUM_HTH_TRANF_FUND_ID,GNUM_HOSPITAL_CODE) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
	 </QRY>
	 </BLOCK>
   
	 <BLOCK ID="10" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
	 <QRY ID="1" COL_SIZE="14">
	 INSERT INTO ACTBUD_H_FUND_TO_DTL (STR_DIVISION_CODE,STR_SUB_DIVION_CODE,STR_SCHEME_CODE,STR_PROJECT_CODE,STR_MAJOR_HEAD_CODE,STR_SUB_MAJOR_HEAD_CODE,STR_MINOR_HEAD_CODE,STR_SUB_MINOR_HEAD_CODE,NUM_CR_AMOUNT,GDT_ENTRY_DATE,GNUM_ISVALID,GNUM_SEAT_ID,NUM_HTH_TRANF_FUND_ID,GNUM_HOSPITAL_CODE) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?)
	 </QRY>
	 </BLOCK>
		   
</OPR>
    
  
  
  
<OPR ID="3" NAME="UPDATE" BLOCK_SIZE="10" QRY_TOT_SIZE="10" TRN_MGMT="Y">
    <BLOCK ID="1" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
   <QRY ID="1" COL_SIZE="23">
   UPDATE ACTBUD_ALLOC_PNP_DTL SET NUM_AFTER_TRANSFER_DR_AMOUNT=? WHERE NUM_ALLOC_ID in (select t.num_alloc_id from actbud_alloc_pnp_trn t, ACTBUD_ALLOC_PNP_DTL d where t.num_alloc_id=d.num_alloc_id and t.str_grant_type_code=? and t.str_bud_type_code=? and t.num_dept_code=? and t.str_budget_year=? and d.STR_DIVISION_ID=?  AND d.STR_SUB_DIVION_CODE=? AND d.STR_SCHEM_CODE=? AND d.STR_PROJECT_CODE=? AND d.STR_MAJOR_HEAD_CODE=? AND d.STR_SUB_MAJOR_HEAD_CODE=? AND d.STR_MINOR_HEAD_CODE=? AND d.STR_SUB_MINOR_HEAD_CODE=? AND d.GNUM_HOSPITAL_CODE=?) and STR_DIVISION_ID=?  AND STR_SUB_DIVION_CODE=? AND STR_SCHEM_CODE=? AND STR_PROJECT_CODE=? AND STR_MAJOR_HEAD_CODE=? AND STR_SUB_MAJOR_HEAD_CODE=? AND STR_MINOR_HEAD_CODE=? AND STR_SUB_MINOR_HEAD_CODE=? AND GNUM_HOSPITAL_CODE=?
   </QRY>
   </BLOCK>
      
   <BLOCK ID="2" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
   <QRY ID="1" COL_SIZE="23">
   UPDATE ACTBUD_ALLOC_PNP_DTL SET NUM_AFTER_TRASNFER_CR_AMOUNT=? WHERE NUM_ALLOC_ID in (select t.num_alloc_id from actbud_alloc_pnp_trn t, ACTBUD_ALLOC_PNP_DTL d where t.num_alloc_id=d.num_alloc_id and t.str_grant_type_code=? and t.str_bud_type_code=? and t.num_dept_code=? and t.str_budget_year=? and d.STR_DIVISION_ID=?  AND d.STR_SUB_DIVION_CODE=? AND d.STR_SCHEM_CODE=? AND d.STR_PROJECT_CODE=? AND d.STR_MAJOR_HEAD_CODE=? AND d.STR_SUB_MAJOR_HEAD_CODE=? AND d.STR_MINOR_HEAD_CODE=? AND d.STR_SUB_MINOR_HEAD_CODE=? AND d.GNUM_HOSPITAL_CODE=?) and STR_DIVISION_ID=?  AND STR_SUB_DIVION_CODE=? AND STR_SCHEM_CODE=? AND STR_PROJECT_CODE=? AND STR_MAJOR_HEAD_CODE=? AND STR_SUB_MAJOR_HEAD_CODE=? AND STR_MINOR_HEAD_CODE=? AND STR_SUB_MINOR_HEAD_CODE=? AND GNUM_HOSPITAL_CODE=?
   </QRY>
   </BLOCK>
   
    <BLOCK ID="3" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
	 <QRY ID="1" COL_SIZE="2">
	 INSERT INTO ACTBUD_ALOG_H_FUND_TRAN_TRN(STR_BUDGET_YEAR,STR_SANCTION_AUTH,STR_SANCTION_OREDER_NO,DT_SANCTION_ORDER_DATE,STR_GRANT_TYPE_CODE,STR_BUD_TYPE_CODE,STR_TYPE_OF_DEPT,NUM_DEPT_CODE ,GDT_LSTMOD_DATE,GNUM_LSTMOD_SEATID,GDT_ENTRY_DATE,GNUM_ISVALID ,GNUM_SEAT_ID ,NUM_HTH_TRANF_FUND_ID,STR_SINATORY_AUTH,GNUM_HOSPITAL_CODE ) (SELECT T.STR_BUDGET_YEAR,T.STR_SANCTION_AUTH,T.STR_SANCTION_OREDER_NO,T.DT_SANCTION_ORDER_DATE,T.STR_GRANT_TYPE_CODE,T.STR_BUD_TYPE_CODE,T.STR_TYPE_OF_DEPT,T.NUM_DEPT_CODE ,T.GDT_LSTMOD_DATE,T.GNUM_LSTMOD_SEATID,T.GDT_ENTRY_DATE,T.GNUM_ISVALID ,T.GNUM_SEAT_ID ,T.NUM_HTH_TRANF_FUND_ID,T.STR_SINATORY_AUTH,T.GNUM_HOSPITAL_CODE FROM ACTBUD_H_FUND_TRAN_TRN T WHERE T.NUM_HTH_TRANF_FUND_ID=? AND T.GNUM_HOSPITAL_CODE=?)
	 </QRY>
	 </BLOCK>
	
	<BLOCK ID="4" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
	 <QRY ID="1" COL_SIZE="2">
	 INSERT INTO ACTBUD_ALOG_H_FUND_FROM_DTL(NUM_HTH_TRANF_FUND_ID,NUM_FROM_DEPT_CODE,STR_DIVISION_CODE,STR_SUB_DIVION_CODE,STR_SCHEME_CODE,STR_PROJECT_CODE,STR_MAJOR_HEAD_CODE,STR_SUB_MAJOR_HEAD_CODE ,STR_MINOR_HEAD_CODE,STR_SUB_MINOR_HEAD_CODE,NUM_DR_AMOUNT,NUM_CR_AMOUNT ,GDT_ENTRY_DATE ,GNUM_ISVALID,GNUM_SEAT_ID,GNUM_HOSPITAL_CODE ) (SELECT T.NUM_HTH_TRANF_FUND_ID,T.NUM_FROM_DEPT_CODE,T.STR_DIVISION_CODE,T.STR_SUB_DIVION_CODE,T.STR_SCHEME_CODE,T.STR_PROJECT_CODE,T.STR_MAJOR_HEAD_CODE,T.STR_SUB_MAJOR_HEAD_CODE ,T.STR_MINOR_HEAD_CODE,T.STR_SUB_MINOR_HEAD_CODE,T.NUM_DR_AMOUNT,T.NUM_CR_AMOUNT ,T.GDT_ENTRY_DATE ,T.GNUM_ISVALID,T.GNUM_SEAT_ID,T.GNUM_HOSPITAL_CODE FROM ACTBUD_H_FUND_FROM_DTL T WHERE T.NUM_HTH_TRANF_FUND_ID=? AND T.GNUM_HOSPITAL_CODE=?)
	 </QRY>
	 </BLOCK>
	 
	 <BLOCK ID="5" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
	 <QRY ID="1" COL_SIZE="2">
	 INSERT INTO ACTBUD_ALOG_H_FUND_TO_DTL(NUM_HTH_TRANF_FUND_ID,NUM_FROM_DEPT_CODE,STR_DIVISION_CODE,STR_SUB_DIVION_CODE,STR_SCHEME_CODE,STR_PROJECT_CODE,STR_MAJOR_HEAD_CODE,STR_SUB_MAJOR_HEAD_CODE ,STR_MINOR_HEAD_CODE,STR_SUB_MINOR_HEAD_CODE,NUM_DR_AMOUNT,NUM_CR_AMOUNT ,GDT_ENTRY_DATE ,GNUM_ISVALID,GNUM_SEAT_ID,GNUM_HOSPITAL_CODE ) (SELECT T.NUM_HTH_TRANF_FUND_ID,T.NUM_FROM_DEPT_CODE,T.STR_DIVISION_CODE,T.STR_SUB_DIVION_CODE,T.STR_SCHEME_CODE,T.STR_PROJECT_CODE,T.STR_MAJOR_HEAD_CODE,T.STR_SUB_MAJOR_HEAD_CODE ,T.STR_MINOR_HEAD_CODE,T.STR_SUB_MINOR_HEAD_CODE,T.NUM_DR_AMOUNT,T.NUM_CR_AMOUNT ,T.GDT_ENTRY_DATE ,T.GNUM_ISVALID,T.GNUM_SEAT_ID,T.GNUM_HOSPITAL_CODE FROM ACTBUD_H_FUND_TO_DTL T WHERE T.NUM_HTH_TRANF_FUND_ID=? AND T.GNUM_HOSPITAL_CODE=?)
	 </QRY>
	 </BLOCK>
	 
   <BLOCK ID="6" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
    <QRY ID="1" COL_SIZE="2">
	DELETE FROM  ACTBUD_H_FUND_FROM_DTL A WHERE NUM_HTH_TRANF_FUND_ID=? AND GNUM_HOSPITAL_CODE=?
	</QRY>
    </BLOCK>
 
    <BLOCK ID="7" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
	<QRY ID="1" COL_SIZE="2">
	DELETE FROM  ACTBUD_H_FUND_TO_DTL A WHERE NUM_HTH_TRANF_FUND_ID=? AND GNUM_HOSPITAL_CODE=?
	</QRY>
    </BLOCK>
   
    <BLOCK ID="8" QRY_SIZE="1" ROWS_INS="S" MANDATORY="Y">
	<QRY ID="1" COL_SIZE="12">
	UPDATE ACTBUD_H_FUND_TRAN_TRN SET STR_BUDGET_YEAR=?,STR_SANCTION_AUTH=?,STR_SANCTION_OREDER_NO=?,DT_SANCTION_ORDER_DATE=?,STR_SINATORY_AUTH=?,STR_GRANT_TYPE_CODE=?,STR_BUD_TYPE_CODE=?,STR_TYPE_OF_DEPT=?,GDT_LSTMOD_DATE=?,GNUM_LSTMOD_SEATID=? WHERE NUM_HTH_TRANF_FUND_ID=? AND GNUM_HOSPITAL_CODE=?
	</QRY>
    </BLOCK>
	
   <BLOCK ID="9" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
   <QRY ID="1" COL_SIZE="15">
   INSERT INTO ACTBUD_H_FUND_FROM_DTL (NUM_FROM_DEPT_CODE,STR_DIVISION_CODE,STR_SUB_DIVION_CODE,STR_SCHEME_CODE,STR_PROJECT_CODE,STR_MAJOR_HEAD_CODE,STR_SUB_MAJOR_HEAD_CODE,STR_MINOR_HEAD_CODE,STR_SUB_MINOR_HEAD_CODE,NUM_DR_AMOUNT,GDT_ENTRY_DATE,GNUM_ISVALID,GNUM_SEAT_ID,NUM_HTH_TRANF_FUND_ID,GNUM_HOSPITAL_CODE) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
   </QRY>
   </BLOCK>
   
   <BLOCK ID="10" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
   <QRY ID="1" COL_SIZE="15">
   INSERT INTO ACTBUD_H_FUND_TO_DTL (NUM_FROM_DEPT_CODE,STR_DIVISION_CODE,STR_SUB_DIVION_CODE,STR_SCHEME_CODE,STR_PROJECT_CODE,STR_MAJOR_HEAD_CODE,STR_SUB_MAJOR_HEAD_CODE,STR_MINOR_HEAD_CODE,STR_SUB_MINOR_HEAD_CODE,NUM_CR_AMOUNT,GDT_ENTRY_DATE,GNUM_ISVALID,GNUM_SEAT_ID,NUM_HTH_TRANF_FUND_ID,GNUM_HOSPITAL_CODE) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
   </QRY>
   </BLOCK>
   
</OPR>
     
   
<OPR ID="4" NAME="DELETE" BLOCK_SIZE="3" QRY_TOT_SIZE="3" TRN_MGMT="Y">
  <BLOCK ID="1" QRY_SIZE="1" ROWS_INS="S" MANDATORY="Y">
	<QRY ID="1" COL_SIZE="2">
		 UPDATE ACTBUD_H_FUND_TRAN_TRN SET GNUM_ISVALID=0 WHERE NUM_HTH_TRANF_FUND_ID=?  AND GNUM_HOSPITAL_CODE=?
	</QRY>
   </BLOCK>
   
   <BLOCK ID="2" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
	<QRY ID="1" COL_SIZE="2">
	 	UPDATE ACTBUD_H_FUND_FROM_DTL SET GNUM_ISVALID=0 WHERE NUM_HTH_TRANF_FUND_ID=? AND GNUM_HOSPITAL_CODE=?
	</QRY>
   </BLOCK>
   
     <BLOCK ID="3" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
	<QRY ID="1" COL_SIZE="2">
	    UPDATE ACTBUD_H_FUND_TO_DTL SET GNUM_ISVALID=0 WHERE NUM_HTH_TRANF_FUND_ID=? AND GNUM_HOSPITAL_CODE=?
	</QRY>
   </BLOCK>
   
</OPR>
   
   
   
</tns:Transaction>