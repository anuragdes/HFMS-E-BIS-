<?xml version="1.0" encoding="UTF-8"?>
<tns:Transaction MODULE_NAME="CASH" PROCESS_NAME="Challan Form Preparation" xmlns:tns="http://www.example.org/transactionSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.example.org/transactionSchema transactionSchema.xsd ">
  
   <OPR ID="1" NAME="INSERT" BLOCK_SIZE="2" QRY_TOT_SIZE="2" TRN_MGMT="N">
  	<BLOCK ID="1" QRY_SIZE="1" ROWS_INS="S" MANDATORY="Y">
  	 <QRY ID="1" COL_SIZE="56">
  	 INSERT INTO ACTCAS_CHAL_TRN (STR_CHALLAN_NO,DT_CHALLAN_DATE,STR_TYPE_OF_DEPOSITOR,STR_EMPLOYEE_CODE,STR_AGN_CODE,NUM_DEPT_CODE,STR_HOD_CODE,STR_OTHER_DEPOSITOR_INFO,STR_DEPOSIT_TYPE,NUM_AMOUNT_TO_BE_DEPOSIT,STR_PARTICULAR_OF_DEPOSIT,STR_PREPARATION_REMAKRS,STR_PREPARED_BY,STR_NON_EMP_USER_NAME,INT_USER_TYPE,STR_CHALLAN_STATUS,STR_DEPOSIT_INTO_CODE, STR_CLASSIFICATION_CODE,NUM_NO_OF_THOUSAND, NUM_NO_OF_FIVE_HUNDRED,NUM_NO_OF_HUNDRED, NUM_NO_OF_FIFTY, NUM_NO_OF_TWENTY, NUM_NO_OF_TEN, NUM_NO_OF_FIVE, NUM_NO_OF_TWO, NUM_NO_OF_ONE,NUM_COIN_AMOUNT, NUM_NO_OF_COIN,GDT_LSTMOD_DATE,GNUM_LSTMOD_SEATID,GDT_EFFECT_DATE,GDT_ENTRY_DATE,GNUM_ISVALID,GNUM_SEAT_ID,gnum_hospital_code,STR_CR_ADV_LETTER_NO,DT_CR_ADV_LETTER_DATE,NUM_CR_ADV_AMOUNT,STR_REC_BANK_CODE,STR_REC_BRANCH_CODE,DT_AMOUNT_RECEIVED_DATE,STR_SENDER_BANK_CODE,STR_SENDER_BRANCH_CODE,STR_CR_ADV_REMAKRS,DT_BNK_DEP_REC_DATE,NUM_BNK_DEP_REC_AMOUNT,STR_BNK_DEP_BANK_CODE,STR_BNK_DEP_BRANCH_CODE,STR_BNK_DEP_BY,STR_BNK_DEP_REMARKS, NUM_CR_CARD_AMT, NUM_DR_CARD_AMT, NUM_CASH_AMOUNT,NUM_INTEREST_AMT, INT_CR_ADV_PRNT_STAT) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
  	</QRY>
  	</BLOCK>
  	<BLOCK ID="2" QRY_SIZE="1" ROWS_INS="S" MANDATORY="Y">
		 <QRY ID="1" COL_SIZE="5">
		  UPDATE actcon_lc_trn T SET T.INT_CR_ADV_PRNT_STAT=?,t.STR_CHALLAN_NO=? WHERE   T.GNUM_HOSPITAL_CODE=? and (t.str_man_lc_num = ? OR t.str_reference_number = ?)
		</QRY>
	</BLOCK>
</OPR>

<OPR ID="2" NAME="INSERT" BLOCK_SIZE="1" QRY_TOT_SIZE="1" TRN_MGMT="N">
	<BLOCK ID="1" QRY_SIZE="1" ROWS_INS="S" MANDATORY="Y">
	 <QRY ID="1" COL_SIZE="16">
	 INSERT INTO ACTCAS_CHAL_DTL (STR_CHALLAN_NO,DT_CHALLAN_DATE,STR_INSTRUMENT_TYPE,STR_INSTRUMENT_NO,DT_INSTRUMENT_DATE,NUM_INSTRUMENT_AMOUNT,STR_BANK_CODE,DT_RECEIPT_DATE,GDT_LSTMOD_DATE,GNUM_LSTMOD_SEATID,GDT_EFFECT_DATE,GDT_ENTRY_DATE,GNUM_ISVALID,GNUM_SEAT_ID,gnum_hospital_code,NUM_INSTRUMENT_SL_NO ) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
	</QRY>
	</BLOCK>
</OPR>

<OPR ID="3" NAME="UPDATE" BLOCK_SIZE="2" QRY_TOT_SIZE="2" TRN_MGMT="N">

<BLOCK ID="1" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
		<QRY ID="1" COL_SIZE="2">
			INSERT INTO ACTCAS_AL_CHAL_TRN(STR_CHALLAN_NO,DT_CHALLAN_DATE,STR_TYPE_OF_DEPOSITOR,STR_EMPLOYEE_CODE,STR_AGN_CODE,NUM_DEPT_CODE,STR_HOD_CODE,STR_DEPOSIT_TYPE,NUM_NO_OF_THOUSAND,NUM_NO_OF_FIVE_HUNDRED, NUM_NO_OF_HUNDRED, NUM_NO_OF_FIFTY, NUM_NO_OF_TWENTY, NUM_NO_OF_TEN,NUM_NO_OF_FIVE, NUM_NO_OF_TWO, NUM_NO_OF_ONE,NUM_COIN_AMOUNT, NUM_NO_OF_COIN,STR_DEPOSIT_INTO_CODE, STR_CLASSIFICATION_CODE,NUM_AMOUNT_TO_BE_DEPOSIT,STR_PARTICULAR_OF_DEPOSIT,STR_PREPARATION_REMAKRS,STR_PREPARED_BY,STR_CHALLAN_STATUS,GDT_LSTMOD_DATE,GNUM_LSTMOD_SEATID,GDT_EFFECT_DATE,GDT_ENTRY_DATE,GNUM_ISVALID,GNUM_SEAT_ID,GNUM_HOSPITAL_CODE,STR_OTHER_DEPOSITOR_INFO,STR_CR_ADV_LETTER_NO,DT_CR_ADV_LETTER_DATE,NUM_CR_ADV_AMOUNT,STR_REC_BANK_CODE,STR_REC_BRANCH_CODE,DT_AMOUNT_RECEIVED_DATE,STR_SENDER_BANK_CODE,STR_SENDER_BRANCH_CODE,STR_CR_ADV_REMAKRS,DT_BNK_DEP_REC_DATE,NUM_BNK_DEP_REC_AMOUNT,STR_BNK_DEP_BANK_CODE,STR_BNK_DEP_BRANCH_CODE,STR_BNK_DEP_BY,STR_BNK_DEP_REMARKS, NUM_CR_CARD_AMT, NUM_DR_CARD_AMT, NUM_CASH_AMOUNT, STR_MODIFY_SL_NO ) ( SELECT  T.STR_CHALLAN_NO,T.DT_CHALLAN_DATE,T.STR_TYPE_OF_DEPOSITOR,T.STR_EMPLOYEE_CODE,T.STR_AGN_CODE,T.NUM_DEPT_CODE,T.STR_HOD_CODE, T.STR_DEPOSIT_TYPE,T.NUM_NO_OF_THOUSAND, T.NUM_NO_OF_FIVE_HUNDRED, T.NUM_NO_OF_HUNDRED, T.NUM_NO_OF_FIFTY, T.NUM_NO_OF_TWENTY, T.NUM_NO_OF_TEN, T.NUM_NO_OF_FIVE, T.NUM_NO_OF_TWO, T.NUM_NO_OF_ONE, T.NUM_COIN_AMOUNT, T.NUM_NO_OF_COIN, T.STR_DEPOSIT_INTO_CODE, T.STR_CLASSIFICATION_CODE, T.NUM_AMOUNT_TO_BE_DEPOSIT,T.STR_PARTICULAR_OF_DEPOSIT,T.STR_PREPARATION_REMAKRS,T.STR_PREPARED_BY,T.STR_CHALLAN_STATUS,T.GDT_LSTMOD_DATE, T.GNUM_LSTMOD_SEATID,T.GDT_EFFECT_DATE,T.GDT_ENTRY_DATE,T.GNUM_ISVALID,T.GNUM_SEAT_ID,T.GNUM_HOSPITAL_CODE,T.STR_OTHER_DEPOSITOR_INFO, T.STR_CR_ADV_LETTER_NO,T.DT_CR_ADV_LETTER_DATE,T.NUM_CR_ADV_AMOUNT,T.STR_REC_BANK_CODE,T.STR_REC_BRANCH_CODE,T.DT_AMOUNT_RECEIVED_DATE, T.STR_SENDER_BANK_CODE,T.STR_SENDER_BRANCH_CODE, T.STR_CR_ADV_REMAKRS, T.DT_BNK_DEP_REC_DATE,T.NUM_BNK_DEP_REC_AMOUNT,T.STR_BNK_DEP_BANK_CODE,T.STR_BNK_DEP_BRANCH_CODE,T.STR_BNK_DEP_BY,T.STR_BNK_DEP_REMARKS, T.NUM_CR_CARD_AMT, T.NUM_DR_CARD_AMT, T.NUM_CASH_AMOUNT ,(select nvl(max(A.STR_MODIFY_SL_NO),0)+1 from ACTCAS_AL_CHAL_TRN A where A.STR_CHALLAN_NO=T.STR_CHALLAN_NO and A.GNUM_HOSPITAL_CODE=T.GNUM_HOSPITAL_CODE) FROM ACTCAS_CHAL_TRN T WHERE T.STR_CHALLAN_NO=? AND T.GNUM_HOSPITAL_CODE=?)
		</QRY>
	   </BLOCK>
	 

	<BLOCK ID="2" QRY_SIZE="1" ROWS_INS="S" MANDATORY="Y">
	 <QRY ID="1" COL_SIZE="48">
	 UPDATE ACTCAS_CHAL_TRN T SET T.STR_OTHER_DEPOSITOR_INFO=?,T.STR_CHALLAN_NO=?,T.DT_CHALLAN_DATE=?,T.STR_TYPE_OF_DEPOSITOR=?,T.STR_EMPLOYEE_CODE=?,T.STR_AGN_CODE=?,T.NUM_DEPT_CODE=?,T.STR_HOD_CODE=?,T.STR_DEPOSIT_TYPE=?,T.NUM_NO_OF_THOUSAND=?, T.NUM_NO_OF_FIVE_HUNDRED=?, T.NUM_NO_OF_HUNDRED=?, T.NUM_NO_OF_FIFTY=?,T.NUM_NO_OF_TWENTY=?, T.NUM_NO_OF_TEN=?, T.NUM_NO_OF_FIVE=?, T.NUM_NO_OF_TWO=?, T.NUM_NO_OF_ONE=?,T.NUM_COIN_AMOUNT=?, T.NUM_NO_OF_COIN=?,T.STR_DEPOSIT_INTO_CODE=?, T.STR_CLASSIFICATION_CODE=?,T.NUM_AMOUNT_TO_BE_DEPOSIT=?,T.STR_PARTICULAR_OF_DEPOSIT=?,T.STR_PREPARATION_REMAKRS=?,T.STR_PREPARED_BY=?,T.GDT_LSTMOD_DATE=?,T.GNUM_LSTMOD_SEATID=?,T.STR_CR_ADV_LETTER_NO=?,T.DT_CR_ADV_LETTER_DATE=?,T.NUM_CR_ADV_AMOUNT=?,T.STR_REC_BANK_CODE=?,T.STR_REC_BRANCH_CODE=?,T.DT_AMOUNT_RECEIVED_DATE=?, T.STR_SENDER_BANK_CODE=?,T.STR_SENDER_BRANCH_CODE=?, T.STR_CR_ADV_REMAKRS=?, T.DT_BNK_DEP_REC_DATE=?,T.NUM_BNK_DEP_REC_AMOUNT=?,T.STR_BNK_DEP_BANK_CODE=?,T.STR_BNK_DEP_BRANCH_CODE=?,T.STR_BNK_DEP_BY=?,T.STR_BNK_DEP_REMARKS=?, T.NUM_CR_CARD_AMT=?, T.NUM_DR_CARD_AMT=?, T.NUM_CASH_AMOUNT=? WHERE T.STR_CHALLAN_NO=? AND T.GNUM_HOSPITAL_CODE=?
	</QRY>
	</BLOCK>
</OPR>

<OPR ID="4" NAME="MODIFICATION" BLOCK_SIZE="1" QRY_TOT_SIZE="1" TRN_MGMT="N">
	<BLOCK ID="1" QRY_SIZE="1" ROWS_INS="S" MANDATORY="Y">
	 <QRY ID="1" COL_SIZE="16">
	 INSERT INTO ACTCAS_CHAL_DTL (STR_CHALLAN_NO,DT_CHALLAN_DATE,STR_INSTRUMENT_TYPE,STR_INSTRUMENT_NO,DT_INSTRUMENT_DATE,NUM_INSTRUMENT_AMOUNT,STR_BANK_CODE,DT_RECEIPT_DATE,GDT_LSTMOD_DATE,GNUM_LSTMOD_SEATID,GDT_EFFECT_DATE,GDT_ENTRY_DATE,GNUM_ISVALID,GNUM_SEAT_ID,gnum_hospital_code,NUM_INSTRUMENT_SL_NO ) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
	</QRY>
	</BLOCK>
</OPR>

<OPR ID="5" NAME="INSERT" BLOCK_SIZE="1" QRY_TOT_SIZE="1" TRN_MGMT="N">
	<BLOCK ID="1" QRY_SIZE="1" ROWS_INS="S" MANDATORY="Y">
	 <QRY ID="1" COL_SIZE="15">
	 INSERT INTO ACTCAS_CHAL_PRE_TEMP_TRN
    (NUM_PAGE_NO ,NUM_SERIAL_NO,STR_INSTRUMENTNO,DT_INSTRUMENTDATE,STR_INSTRUMENT_TYPE ,
  NUM_INSTRUMENT_AMOUNT ,STR_BANK_DETAIL,STR_RECEIPT_DATE,GDT_LSTMOD_DATE ,GNUM_LSTMOD_SEATID,
  GDT_EFFECT_DATE,GDT_ENTRY_DATE,GNUM_ISVALID,GNUM_SEAT_ID, GNUM_HOSPITAL_CODE ) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
	</QRY>
	</BLOCK>
</OPR>


<OPR ID="6" NAME="INSERT" BLOCK_SIZE="1" QRY_TOT_SIZE="1" TRN_MGMT="N">
	<BLOCK ID="1" QRY_SIZE="1" ROWS_INS="S" MANDATORY="Y">
	 <QRY ID="1" COL_SIZE="3">
	 Delete from  ACTCAS_CHAL_PRE_TEMP_TRN where NUM_PAGE_NO=? and GNUM_SEAT_ID=? and GNUM_HOSPITAL_CODE=? 
	</QRY>
	</BLOCK>
</OPR>

<OPR ID="7" NAME="INSERT" BLOCK_SIZE="2" QRY_TOT_SIZE="2" TRN_MGMT="N">
	<BLOCK ID="1" QRY_SIZE="1" ROWS_INS="S" MANDATORY="Y">
	 <QRY ID="1" COL_SIZE="17">
	 INSERT INTO ACTCAS_CHAL_DTL (STR_CHALLAN_NO,DT_CHALLAN_DATE,STR_INSTRUMENT_TYPE,STR_INSTRUMENT_NO,DT_INSTRUMENT_DATE,NUM_INSTRUMENT_AMOUNT,STR_BANK_CODE,DT_RECEIPT_DATE,GDT_LSTMOD_DATE,GNUM_LSTMOD_SEATID,GDT_EFFECT_DATE,GDT_ENTRY_DATE,GNUM_ISVALID,GNUM_SEAT_ID,GNUM_HOSPITAL_CODE,NUM_INSTRUMENT_SL_NO) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,(select (max(d.NUM_INSTRUMENT_SL_NO)+1) from ACTCAS_CHAL_DTL d where d.STR_CHALLAN_NO=? and d.GNUM_HOSPITAL_CODE=?))
	</QRY>
	</BLOCK>
	<BLOCK ID="2" QRY_SIZE="1" ROWS_INS="S" MANDATORY="Y">
	 <QRY ID="1" COL_SIZE="3">
	 update ACTCAS_CHAL_TRN T set T.NUM_AMOUNT_TO_BE_DEPOSIT=? where T.STR_CHALLAN_NO=? and T.GNUM_HOSPITAL_CODE=?
	</QRY>
	</BLOCK>
</OPR>

<OPR ID="8" NAME="INSERT" BLOCK_SIZE="4" QRY_TOT_SIZE="4" TRN_MGMT="N">
	<BLOCK ID="1" QRY_SIZE="1" ROWS_INS="S" MANDATORY="Y">
	 <QRY ID="1" COL_SIZE="3">
	 INSERT INTO ACTCAS_AL_CHAL_DTL(STR_CHALLAN_NO,DT_CHALLAN_DATE,NUM_INSTRUMENT_SL_NO,STR_INSTRUMENT_TYPE,STR_INSTRUMENT_NO,DT_INSTRUMENT_DATE,NUM_INSTRUMENT_AMOUNT,STR_BANK_CODE,DT_RECEIPT_DATE,GDT_LSTMOD_DATE,GNUM_LSTMOD_SEATID,GDT_EFFECT_DATE,GDT_ENTRY_DATE,GNUM_ISVALID,GNUM_SEAT_ID,GNUM_HOSPITAL_CODE,STR_MODIFY_SL_NO) ( SELECT T.STR_CHALLAN_NO,T.DT_CHALLAN_DATE,T.NUM_INSTRUMENT_SL_NO,T.STR_INSTRUMENT_TYPE,T.STR_INSTRUMENT_NO,T.DT_INSTRUMENT_DATE,T.NUM_INSTRUMENT_AMOUNT,T.STR_BANK_CODE,T.DT_RECEIPT_DATE,T.GDT_LSTMOD_DATE,T.GNUM_LSTMOD_SEATID,T.GDT_EFFECT_DATE,T.GDT_ENTRY_DATE,T.GNUM_ISVALID,T.GNUM_SEAT_ID,T.GNUM_HOSPITAL_CODE,(select nvl(max(A.STR_MODIFY_SL_NO),0)+1 from ACTCAS_AL_CHAL_DTL A where A.STR_CHALLAN_NO=T.STR_CHALLAN_NO and A.NUM_INSTRUMENT_SL_NO=T.NUM_INSTRUMENT_SL_NO and A.GNUM_HOSPITAL_CODE=T.GNUM_HOSPITAL_CODE) FROM ACTCAS_CHAL_DTL T WHERE T.STR_CHALLAN_NO=? AND T.NUM_INSTRUMENT_SL_NO=? AND T.GNUM_HOSPITAL_CODE=?)
	</QRY>
	</BLOCK>
	<BLOCK ID="2" QRY_SIZE="1" ROWS_INS="S" MANDATORY="Y">
	 <QRY ID="1" COL_SIZE="9">
	 UPDATE ACTCAS_CHAL_DTL  T SET T.STR_INSTRUMENT_TYPE=?,T.STR_INSTRUMENT_NO=?,T.DT_INSTRUMENT_DATE=?,T.NUM_INSTRUMENT_AMOUNT=?,T.STR_BANK_CODE=?,T.DT_RECEIPT_DATE=? where T.STR_CHALLAN_NO=? and T.NUM_INSTRUMENT_SL_NO=? and T.gnum_hospital_code=?
	</QRY>
	</BLOCK>
	<BLOCK ID="3" QRY_SIZE="1" ROWS_INS="S" MANDATORY="Y">
	 <QRY ID="1" COL_SIZE="2">
	 INSERT INTO ACTCAS_AL_CHAL_TRN(STR_CHALLAN_NO,DT_CHALLAN_DATE,STR_TYPE_OF_DEPOSITOR,STR_EMPLOYEE_CODE,STR_AGN_CODE,NUM_DEPT_CODE,STR_HOD_CODE,STR_DEPOSIT_TYPE,NUM_NO_OF_THOUSAND, NUM_NO_OF_FIVE_HUNDRED, NUM_NO_OF_HUNDRED, NUM_NO_OF_FIFTY, NUM_NO_OF_TWENTY, NUM_NO_OF_TEN, NUM_NO_OF_FIVE, NUM_NO_OF_TWO, NUM_NO_OF_ONE, NUM_COIN_AMOUNT, NUM_NO_OF_COIN,STR_DEPOSIT_INTO_CODE, STR_CLASSIFICATION_CODE,NUM_AMOUNT_TO_BE_DEPOSIT,STR_PARTICULAR_OF_DEPOSIT,STR_PREPARATION_REMAKRS,STR_PREPARED_BY,STR_CHALLAN_STATUS,GDT_LSTMOD_DATE,GNUM_LSTMOD_SEATID,GDT_EFFECT_DATE,GDT_ENTRY_DATE,GNUM_ISVALID,GNUM_SEAT_ID,GNUM_HOSPITAL_CODE,STR_MODIFY_SL_NO ) ( SELECT  T.STR_CHALLAN_NO,T.DT_CHALLAN_DATE,T.STR_TYPE_OF_DEPOSITOR,T.STR_EMPLOYEE_CODE,T.STR_AGN_CODE,T.NUM_DEPT_CODE,T.STR_HOD_CODE,T.STR_DEPOSIT_TYPE,NUM_NO_OF_THOUSAND, NUM_NO_OF_FIVE_HUNDRED, NUM_NO_OF_HUNDRED, NUM_NO_OF_FIFTY, NUM_NO_OF_TWENTY, NUM_NO_OF_TEN, NUM_NO_OF_FIVE, NUM_NO_OF_TWO, NUM_NO_OF_ONE, NUM_COIN_AMOUNT, NUM_NO_OF_COIN,STR_DEPOSIT_INTO_CODE, STR_CLASSIFICATION_CODE,T.NUM_AMOUNT_TO_BE_DEPOSIT,T.STR_PARTICULAR_OF_DEPOSIT,T.STR_PREPARATION_REMAKRS,T.STR_PREPARED_BY,T.STR_CHALLAN_STATUS,T.GDT_LSTMOD_DATE,T.GNUM_LSTMOD_SEATID,T.GDT_EFFECT_DATE,T.GDT_ENTRY_DATE,T.GNUM_ISVALID,T.GNUM_SEAT_ID,T.GNUM_HOSPITAL_CODE, (select nvl(max(A.STR_MODIFY_SL_NO),0)+1 from ACTCAS_AL_CHAL_TRN A where A.STR_CHALLAN_NO=T.STR_CHALLAN_NO and A.GNUM_HOSPITAL_CODE=T.GNUM_HOSPITAL_CODE) FROM ACTCAS_CHAL_TRN T WHERE T.STR_CHALLAN_NO=? AND T.GNUM_HOSPITAL_CODE=?)
	</QRY>
	</BLOCK>
	<BLOCK ID="4" QRY_SIZE="1" ROWS_INS="S" MANDATORY="Y">
	 <QRY ID="1" COL_SIZE="2">
	 UPDATE ACTCAS_CHAL_TRN T SET T.NUM_AMOUNT_TO_BE_DEPOSIT=(select sum(D.NUM_INSTRUMENT_AMOUNT) from ACTCAS_CHAL_DTL D where D.STR_CHALLAN_NO=T.STR_CHALLAN_NO AND D.GNUM_HOSPITAL_CODE=T.GNUM_HOSPITAL_CODE) WHERE T.STR_CHALLAN_NO=? AND T.GNUM_HOSPITAL_CODE=?
	</QRY>
	</BLOCK>
</OPR>

</tns:Transaction>


