<?xml version="1.0" encoding="UTF-8"?>
<tns:Transaction MODULE_NAME="BUDGET" PROCESS_NAME="Allocation Npn Form" xmlns:tns="http://www.example.org/transactionSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.example.org/transactionSchema transactionSchema.xsd ">


 <OPR ID="1" NAME="INSERT" BLOCK_SIZE="2" QRY_TOT_SIZE="2" TRN_MGMT="Y">
	  <BLOCK ID="1" QRY_SIZE="1" ROWS_INS="S" MANDATORY="Y">
		<QRY ID="1" COL_SIZE="17">
		INSERT INTO ACTBUD_ALLOC_PNP_TRN(STR_BUDGET_YEAR,NUM_DEPT_CODE,STR_HOD_CODE,STR_GRANT_TYPE_CODE,STR_BUD_TYPE_CODE,STR_EVENT_TYPE,STR_SANTIONING_AUTH,STR_ORDER_NUMBER,DT_ORDER_DATE,GDT_ENTRY_DATE,GNUM_ISVALID,GNUM_SEAT_ID,NUM_ALLOC_ID,STR_SCHEME,GNUM_HOSPITAL_CODE,STR_ALLOC_FREEZE_STATUS,STR_APPROVAL_REQ_FROM_FA) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
		</QRY>
	  </BLOCK>
		
	  <BLOCK ID="2" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
		<QRY ID="1" COL_SIZE="15">
		INSERT INTO ACTBUD_ALLOC_PNP_DTL (STR_DIVISION_ID,STR_SUB_DIVION_CODE,STR_SCHEM_CODE,STR_PROJECT_CODE,STR_MAJOR_HEAD_CODE,STR_SUB_MAJOR_HEAD_CODE,STR_MINOR_HEAD_CODE,STR_SUB_MINOR_HEAD_CODE,NUM_ACTUAL_CR_AMOUNT,GDT_ENTRY_DATE,GNUM_ISVALID,GNUM_SEAT_ID,NUM_ALLOC_ID,GNUM_HOSPITAL_CODE,NUM_ALLOC_ID_SL_NO) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
		</QRY>
	   </BLOCK>
  </OPR>
  
   
   
 <OPR ID="5" NAME="INSERT" BLOCK_SIZE="2" QRY_TOT_SIZE="2" TRN_MGMT="Y">
	  <BLOCK ID="1" QRY_SIZE="1" ROWS_INS="S" MANDATORY="Y">
		<QRY ID="1" COL_SIZE="17">
		    INSERT INTO ACTBUD_ALLOC_PNP_TRN(STR_BUDGET_YEAR,NUM_DEPT_CODE,STR_HOD_CODE,STR_GRANT_TYPE_CODE,STR_BUD_TYPE_CODE,STR_EVENT_TYPE,STR_SANTIONING_AUTH,STR_ORDER_NUMBER,DT_ORDER_DATE,GDT_ENTRY_DATE,GNUM_ISVALID,GNUM_SEAT_ID,NUM_ALLOC_ID,STR_SCHEME,GNUM_HOSPITAL_CODE,STR_ALLOC_FREEZE_STATUS,STR_APPROVAL_REQ_FROM_FA) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
		</QRY>
	  </BLOCK>
		
	  <BLOCK ID="2" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
		<QRY ID="1" COL_SIZE="13">
		INSERT INTO ACTBUD_ALLOC_PNP_DTL (STR_DIVISION_ID,STR_SUB_DIVION_CODE,STR_MAJOR_HEAD_CODE,STR_SUB_MAJOR_HEAD_CODE,STR_MINOR_HEAD_CODE,STR_SUB_MINOR_HEAD_CODE,NUM_ACTUAL_CR_AMOUNT,GDT_ENTRY_DATE,GNUM_ISVALID,GNUM_SEAT_ID,NUM_ALLOC_ID,GNUM_HOSPITAL_CODE,NUM_ALLOC_ID_SL_NO) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?)
		</QRY>
	   </BLOCK>
  </OPR>
  
  
     
<OPR ID="2" NAME="UPDATE" BLOCK_SIZE="5" QRY_TOT_SIZE="5" TRN_MGMT="Y">
	  
	  <BLOCK ID="1" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
		<QRY ID="1" COL_SIZE="2">
			 INSERT INTO ACTBUD_ALOG_ALLOC_PNP_TRN(NUM_ALLOC_ID,STR_BUDGET_YEAR,NUM_DEPT_CODE,STR_HOD_CODE,STR_GRANT_TYPE_CODE,STR_BUD_TYPE_CODE,STR_EVENT_TYPE,STR_ORDER_NUMBER ,DT_ORDER_DATE,GDT_LSTMOD_DATE,GNUM_LSTMOD_SEATID,GDT_ENTRY_DATE ,GNUM_ISVALID ,GNUM_SEAT_ID,STR_SANTIONING_AUTH,STR_SCHEME,GNUM_HOSPITAL_CODE,STR_ALLOC_FREEZE_STATUS,STR_SANC_STATUS,DT_SANC_DATE,STR_SANC_BY,STR_SANC_REMARKS,STR_APPOVE_STATUS,DT_APPROVE_DATE,STR_APPROVE_BY,STR_APPROVE_REMARKS,STR_APPROVAL_REQ_FROM_FA,STR_APPROVAL_REQ_FROM_DIRECTOR,STR_MODIFY_SL_NO ) (SELECT T.NUM_ALLOC_ID,T.STR_BUDGET_YEAR,T.NUM_DEPT_CODE,T.STR_HOD_CODE,T.STR_GRANT_TYPE_CODE,T.STR_BUD_TYPE_CODE,T.STR_EVENT_TYPE,T.STR_ORDER_NUMBER ,T.DT_ORDER_DATE,T.GDT_LSTMOD_DATE,T.GNUM_LSTMOD_SEATID,T.GDT_ENTRY_DATE ,T.GNUM_ISVALID ,T.GNUM_SEAT_ID,T.STR_SANTIONING_AUTH,T.STR_SCHEME,T.GNUM_HOSPITAL_CODE,T.STR_ALLOC_FREEZE_STATUS,T.STR_SANC_STATUS,T.DT_SANC_DATE,T.STR_SANC_BY,T.STR_SANC_REMARKS,T.STR_APPOVE_STATUS,T.DT_APPROVE_DATE,T.STR_APPROVE_BY,T.STR_APPROVE_REMARKS,T.STR_APPROVAL_REQ_FROM_FA,T.STR_APPROVAL_REQ_FROM_DIRECTOR,(select nvl(max(A.STR_MODIFY_SL_NO),0)+1 from ACTBUD_ALOG_ALLOC_PNP_TRN A where A.NUM_ALLOC_ID=T.NUM_ALLOC_ID and A.GNUM_HOSPITAL_CODE=T.GNUM_HOSPITAL_CODE) FROM ACTBUD_ALLOC_PNP_TRN T WHERE T.NUM_ALLOC_ID=? AND T.GNUM_HOSPITAL_CODE=?)
		</QRY>
	   </BLOCK>
	   
	   <BLOCK ID="2" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
		<QRY ID="1" COL_SIZE="2">
			 INSERT INTO ACTBUD_ALOG_ALLOC_PNP_DTL(NUM_ALLOC_ID,STR_DIVISION_ID,STR_SUB_DIVION_CODE,STR_SCHEM_CODE,STR_PROJECT_CODE,STR_MAJOR_HEAD_CODE,STR_SUB_MAJOR_HEAD_CODE,STR_MINOR_HEAD_CODE ,STR_SUB_MINOR_HEAD_CODE,NUM_ACTUAL_DR_AMOUNT,NUM_ACTUAL_CR_AMOUNT,NUM_AFTER_TRANSFER_DR_AMOUNT ,NUM_AFTER_TRASNFER_CR_AMOUNT ,GDT_ENTRY_DATE,GNUM_ISVALID,GNUM_SEAT_ID,GNUM_HOSPITAL_CODE,NUM_ALLOC_ID_SL_NO,STR_MODIFY_SL_NO ) (SELECT T.NUM_ALLOC_ID,T.STR_DIVISION_ID,T.STR_SUB_DIVION_CODE,T.STR_SCHEM_CODE,T.STR_PROJECT_CODE,T.STR_MAJOR_HEAD_CODE,T.STR_SUB_MAJOR_HEAD_CODE,T.STR_MINOR_HEAD_CODE ,T.STR_SUB_MINOR_HEAD_CODE,T.NUM_ACTUAL_DR_AMOUNT,T.NUM_ACTUAL_CR_AMOUNT,T.NUM_AFTER_TRANSFER_DR_AMOUNT ,T.NUM_AFTER_TRASNFER_CR_AMOUNT ,T.GDT_ENTRY_DATE,T.GNUM_ISVALID,T.GNUM_SEAT_ID,T.GNUM_HOSPITAL_CODE,T.NUM_ALLOC_ID_SL_NO,(select nvl(max(A.STR_MODIFY_SL_NO),0)+1 from ACTBUD_ALOG_ALLOC_PNP_DTL A where A.NUM_ALLOC_ID=T.NUM_ALLOC_ID and A.GNUM_HOSPITAL_CODE=T.GNUM_HOSPITAL_CODE) FROM ACTBUD_ALLOC_PNP_DTL T WHERE T.NUM_ALLOC_ID=? AND T.GNUM_HOSPITAL_CODE=?)
		</QRY>
	   </BLOCK>
	   
	  <BLOCK ID="3" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
		<QRY ID="1" COL_SIZE="2">
			 DELETE FROM  ACTBUD_ALLOC_PNP_DTL A WHERE A.NUM_ALLOC_ID=?  AND A.GNUM_HOSPITAL_CODE=?
		</QRY>
	   </BLOCK>
	   
	<BLOCK ID="4" QRY_SIZE="1" ROWS_INS="S" MANDATORY="Y">
	<QRY ID="1" COL_SIZE="16">
	 UPDATE ACTBUD_ALLOC_PNP_TRN SET STR_BUDGET_YEAR=?,NUM_DEPT_CODE=?,STR_HOD_CODE=?,STR_GRANT_TYPE_CODE=?,STR_BUD_TYPE_CODE=?,STR_EVENT_TYPE=?,STR_SANTIONING_AUTH=?,STR_ORDER_NUMBER=?,DT_ORDER_DATE=TO_DATE(?,'DD-MON-YYYY'),GDT_LSTMOD_DATE=?,GNUM_LSTMOD_SEATID=?,STR_SCHEME=?,STR_ALLOC_FREEZE_STATUS=?,STR_APPROVAL_REQ_FROM_FA=? WHERE NUM_ALLOC_ID=? AND GNUM_HOSPITAL_CODE=?
	</QRY>
   </BLOCK>
	   
	<BLOCK ID="5" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
		<QRY ID="1" COL_SIZE="15">
	INSERT INTO ACTBUD_ALLOC_PNP_DTL (STR_DIVISION_ID,STR_SUB_DIVION_CODE,STR_SCHEM_CODE,STR_PROJECT_CODE,STR_MAJOR_HEAD_CODE,STR_SUB_MAJOR_HEAD_CODE,STR_MINOR_HEAD_CODE,STR_SUB_MINOR_HEAD_CODE,NUM_ACTUAL_CR_AMOUNT,GDT_ENTRY_DATE,GNUM_ISVALID,GNUM_SEAT_ID,NUM_ALLOC_ID,GNUM_HOSPITAL_CODE,NUM_ALLOC_ID_SL_NO) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)
	</QRY>
   </BLOCK>
	   
  </OPR>
 
	   
  
     
<OPR ID="3" NAME="UPDATE" BLOCK_SIZE="5" QRY_TOT_SIZE="5" TRN_MGMT="Y">
	  <BLOCK ID="1" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
		<QRY ID="1" COL_SIZE="2">
			 INSERT INTO ACTBUD_ALOG_ALLOC_PNP_TRN(NUM_ALLOC_ID,STR_BUDGET_YEAR,NUM_DEPT_CODE,STR_HOD_CODE,STR_GRANT_TYPE_CODE,STR_BUD_TYPE_CODE,STR_EVENT_TYPE,STR_ORDER_NUMBER ,DT_ORDER_DATE,GDT_LSTMOD_DATE,GNUM_LSTMOD_SEATID,GDT_ENTRY_DATE ,GNUM_ISVALID ,GNUM_SEAT_ID,STR_SANTIONING_AUTH,STR_SCHEME,GNUM_HOSPITAL_CODE,STR_ALLOC_FREEZE_STATUS,STR_SANC_STATUS,DT_SANC_DATE,STR_SANC_BY,STR_SANC_REMARKS,STR_APPOVE_STATUS,DT_APPROVE_DATE,STR_APPROVE_BY,STR_APPROVE_REMARKS,STR_APPROVAL_REQ_FROM_FA,STR_APPROVAL_REQ_FROM_DIRECTOR,STR_MODIFY_SL_NO ) (SELECT T.NUM_ALLOC_ID,T.STR_BUDGET_YEAR,T.NUM_DEPT_CODE,T.STR_HOD_CODE,T.STR_GRANT_TYPE_CODE,T.STR_BUD_TYPE_CODE,T.STR_EVENT_TYPE,T.STR_ORDER_NUMBER ,T.DT_ORDER_DATE,T.GDT_LSTMOD_DATE,T.GNUM_LSTMOD_SEATID,T.GDT_ENTRY_DATE ,T.GNUM_ISVALID ,T.GNUM_SEAT_ID,T.STR_SANTIONING_AUTH,T.STR_SCHEME,T.GNUM_HOSPITAL_CODE,T.STR_ALLOC_FREEZE_STATUS,T.STR_SANC_STATUS,T.DT_SANC_DATE,T.STR_SANC_BY,T.STR_SANC_REMARKS,T.STR_APPOVE_STATUS,T.DT_APPROVE_DATE,T.STR_APPROVE_BY,T.STR_APPROVE_REMARKS,T.STR_APPROVAL_REQ_FROM_FA,T.STR_APPROVAL_REQ_FROM_DIRECTOR,(select nvl(max(A.STR_MODIFY_SL_NO),0)+1 from ACTBUD_ALOG_ALLOC_PNP_TRN A where A.NUM_ALLOC_ID=T.NUM_ALLOC_ID and A.GNUM_HOSPITAL_CODE=T.GNUM_HOSPITAL_CODE) FROM ACTBUD_ALLOC_PNP_TRN T WHERE T.NUM_ALLOC_ID=? AND T.GNUM_HOSPITAL_CODE=?)
		</QRY>
	   </BLOCK>
	   
	   <BLOCK ID="2" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
		<QRY ID="1" COL_SIZE="2">
			 INSERT INTO ACTBUD_ALOG_ALLOC_PNP_DTL(NUM_ALLOC_ID,STR_DIVISION_ID,STR_SUB_DIVION_CODE,STR_SCHEM_CODE,STR_PROJECT_CODE,STR_MAJOR_HEAD_CODE,STR_SUB_MAJOR_HEAD_CODE,STR_MINOR_HEAD_CODE ,STR_SUB_MINOR_HEAD_CODE,NUM_ACTUAL_DR_AMOUNT,NUM_ACTUAL_CR_AMOUNT,NUM_AFTER_TRANSFER_DR_AMOUNT ,NUM_AFTER_TRASNFER_CR_AMOUNT ,GDT_ENTRY_DATE,GNUM_ISVALID,GNUM_SEAT_ID,GNUM_HOSPITAL_CODE,NUM_ALLOC_ID_SL_NO,STR_MODIFY_SL_NO ) (SELECT T.NUM_ALLOC_ID,T.STR_DIVISION_ID,T.STR_SUB_DIVION_CODE,T.STR_SCHEM_CODE,T.STR_PROJECT_CODE,T.STR_MAJOR_HEAD_CODE,T.STR_SUB_MAJOR_HEAD_CODE,T.STR_MINOR_HEAD_CODE ,T.STR_SUB_MINOR_HEAD_CODE,T.NUM_ACTUAL_DR_AMOUNT,T.NUM_ACTUAL_CR_AMOUNT,T.NUM_AFTER_TRANSFER_DR_AMOUNT ,T.NUM_AFTER_TRASNFER_CR_AMOUNT ,T.GDT_ENTRY_DATE,T.GNUM_ISVALID,T.GNUM_SEAT_ID,T.GNUM_HOSPITAL_CODE,T.NUM_ALLOC_ID_SL_NO,(select nvl(max(A.STR_MODIFY_SL_NO),0)+1 from ACTBUD_ALOG_ALLOC_PNP_DTL A where A.NUM_ALLOC_ID=T.NUM_ALLOC_ID and A.GNUM_HOSPITAL_CODE=T.GNUM_HOSPITAL_CODE) FROM ACTBUD_ALLOC_PNP_DTL T WHERE T.NUM_ALLOC_ID=? AND T.GNUM_HOSPITAL_CODE=?)
		</QRY>
	   </BLOCK>
	   
	  <BLOCK ID="3" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
		<QRY ID="1" COL_SIZE="2">
			 DELETE FROM  ACTBUD_ALLOC_PNP_DTL A WHERE A.NUM_ALLOC_ID=?  AND A.GNUM_HOSPITAL_CODE=?
		</QRY>
	   </BLOCK>
	   
	<BLOCK ID="4" QRY_SIZE="1" ROWS_INS="S" MANDATORY="Y">
	<QRY ID="1" COL_SIZE="16">
	 UPDATE ACTBUD_ALLOC_PNP_TRN SET STR_BUDGET_YEAR=?,NUM_DEPT_CODE=?,STR_HOD_CODE=?,STR_GRANT_TYPE_CODE=?,STR_BUD_TYPE_CODE=?,STR_EVENT_TYPE=?,STR_SANTIONING_AUTH=?,STR_ORDER_NUMBER=?,DT_ORDER_DATE=TO_DATE(?,'DD-MON-YYYY'),GDT_LSTMOD_DATE=?,GNUM_LSTMOD_SEATID=?,STR_SCHEME=?,STR_ALLOC_FREEZE_STATUS=?,STR_APPROVAL_REQ_FROM_FA=? WHERE NUM_ALLOC_ID=? AND GNUM_HOSPITAL_CODE=?
	</QRY>
   </BLOCK>
	  																				
	<BLOCK ID="5" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
		<QRY ID="1" COL_SIZE="13">
	INSERT INTO ACTBUD_ALLOC_PNP_DTL (STR_DIVISION_ID,STR_SUB_DIVION_CODE,STR_MAJOR_HEAD_CODE,STR_SUB_MAJOR_HEAD_CODE,STR_MINOR_HEAD_CODE,STR_SUB_MINOR_HEAD_CODE,NUM_ACTUAL_CR_AMOUNT,GDT_ENTRY_DATE,GNUM_ISVALID,GNUM_SEAT_ID,NUM_ALLOC_ID,GNUM_HOSPITAL_CODE,NUM_ALLOC_ID_SL_NO) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?)
	</QRY>
   </BLOCK>

  </OPR>
    
   
<OPR ID="4" NAME="DELETE" BLOCK_SIZE="2" QRY_TOT_SIZE="2" TRN_MGMT="Y">
  <BLOCK ID="1" QRY_SIZE="1" ROWS_INS="S" MANDATORY="Y">
	<QRY ID="1" COL_SIZE="2">
		 UPDATE ACTBUD_ALLOC_PNP_TRN SET GNUM_ISVALID=0 WHERE NUM_ALLOC_ID=? AND GNUM_HOSPITAL_CODE=?
	</QRY>
   </BLOCK>
   
   <BLOCK ID="2" QRY_SIZE="1" ROWS_INS="M" MANDATORY="Y">
	<QRY ID="1" COL_SIZE="2">
	 	UPDATE ACTBUD_ALLOC_PNP_DTL SET GNUM_ISVALID=0 WHERE NUM_ALLOC_ID=? AND GNUM_HOSPITAL_CODE=?
	</QRY>
   </BLOCK>
</OPR>
   
   
   
</tns:Transaction>